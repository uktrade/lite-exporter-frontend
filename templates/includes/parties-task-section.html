{% load svg %}

<li class="lite-task-list__item">
	<div class="lite-task-list__item-header">
		{% if edit_type != 'minor_edit' %}
		<a id="{{ entity_name }}" href="{% url section_url application.id %}" class="govuk-link govuk-link--no-visited-state">
			{{ title }}
		</a>
		{%  else %}
			 {{ title }}
		{% endif %}
		{% if data %}
			{% if multiple or document %}
				<div class="lite-tag lite-tag--blue">
					Completed
				</div>
			{% else %}
				<div class="lite-tag lite-tag--orange">
					In progress
				</div>
			{% endif %}
		{% else %}
			<div class="lite-tag lite-tag--hollow">
				Not started
			</div>
		{% endif %}
	</div>
	<div class="lite-task-list__item-details">
		{% if data %}
			<table class="govuk-table">
				{% if multiple %}
					<thead class="govuk-table__head">
						<tr class="govuk-table__row">
							<th class="govuk-table__header" scope="col">Name</th>
							<th class="govuk-table__header" scope="col">Type</th>
							<th class="govuk-table__header" scope="col">Website</th>
							<th class="govuk-table__header" scope="col">Address</th>
							<th class="govuk-table__header" scope="col">Country</th>
							<th class="govuk-table__header" scope="col"></th>
						</tr>
					</thead>
					<tbody class="govuk-table__body">
						{% for item in data %}
							<tr class="govuk-table__row">
								<td class="govuk-table__cell">{{ item.name }}</td>
								<td class="govuk-table__cell">{{ item.sub_type.value }}</td>
								<td class="govuk-table__cell">{{ item.website|default_na }}</td>
								<td class="govuk-table__cell">{{ item.address }}</td>
								<td class="govuk-table__cell">{{ item.country.name }}</td>
							</tr>
						{% endfor %}
					</tbody>
				{% else %}
					<tbody class="govuk-table__body">
						<tr class="govuk-table__row">
							<th class="govuk-table__header" scope="row">Type</th>
							<td class="govuk-table__cell">{{ data.sub_type.value }}</td>
							<td class="govuk-table__cell govuk-table__cell--numeric">
								{% if edit_type != 'minor_edit' %}
								<a class="lite-link--icon" href="{% url delete_url application.id %}">
									{% svg 'close' %}
									Remove
								</a>
								{% endif %}
							</td>
						</tr>
						<tr class="govuk-table__row">
							<th class="govuk-table__header" scope="row">Name</th>
							<td class="govuk-table__cell">{{ data.name }}</td>
						</tr>
						{% if data.website %}
						<tr class="govuk-table__row">
							<th class="govuk-table__header" scope="row">Website</th>
							<td class="govuk-table__cell">{{ data.website }}</td>
						</tr>
						{% endif %}
						<tr class="govuk-table__row">
							<th class="govuk-table__header" scope="row">Address</th>
							<td class="govuk-table__cell">{{ data.address }}<br/>{{ data.country.name }}</td>
						</tr>
						{% if document %}
								<tr class="govuk-table__row">
									<th class="govuk-table__header" scope="row">Document</th>
									<td class="govuk-table__cell" id="{{ entity_name }}_document_state">
										{%  if document.safe == True %}
											<a href="{% url download_url pk=application.id %}" id="{{ entity_name }}_document_download" class='govuk-link govuk-link--no-visited-state'>
												{% lcs 'EndUser.Documents.DOWNLOAD_DOCUMENT' %}
											</a>
											<br/>
											{% if edit_type != 'minor_edit' %}
												<a href="{% url delete_document_url pk=application.id %}" id="{{ entity_name }}_document_delete" class='govuk-link govuk-link--no-visited-state'>
													{% lcs 'EndUser.Documents.DELETE_DOCUMENT' %}
												</a>
											{% endif %}__
										{%  else %}
											{% lcs 'EndUser.Documents.PROCESSING' %}
										{% endif %}

									</td>
								</tr>
							{% else %}
								<tr class="govuk-table__row">
									<th class="govuk-table__header" scope="row">Document</th>
									<td class="govuk-table__cell"><a id="{{ entity_name }}_attach_doc" href="{% url attach_url application.id %}" class='govuk-link govuk-link--no-visited-state'>Attach</a></td>
								</tr>
							{% endif %}
					</tbody>
				{% endif %}
			</table>
		{% endif %}
	</div>
</li>

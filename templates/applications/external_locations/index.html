{% extends 'layouts/base.html' %}

{% block back_link %}
	<a href="{% url 'applications:task_list' draft_id %}" class="govuk-back-link">Back to task list</a>
{% endblock %}

{% block body %}

	<div class="lite-app-bar">
		<div class="lite-app-bar__content">
			<h2 class="govuk-heading-l">{% get_string 'goods.location_lists.title' %}</h2>
		</div>
		<div class="lite-app-bar__controls">
			{% if org_external_locations.external_locations %}
				<a href="{% url 'applications:add_preexisting_external_location' draft_id %}" class="govuk-button govuk-button--secondary">
					{% get_string 'goods.location_lists.find_address_button' %}
				</a>
			{% endif %}
			<a href="{% url 'applications:add_external_location' draft_id %}" class="govuk-button">
				{% get_string 'goods.location_lists.add_address_button' %}
			</a>
		</div>
	</div>

	{% if data.external_locations %}
		<table class="govuk-table">
			<thead class="govuk-table__head">
				<tr class="govuk-table__row">
					<th scope="col" class="govuk-table__header">Name</th>
					<th scope="col" class="govuk-table__header">Address</th>
					<th scope="col" class="govuk-table__header"></th>
				</tr>
			</thead>
			<tbody class="govuk-table__body">
				{% for external_location in data.external_locations %}
					<tr class="govuk-table__row">
						<th class="govuk-table__cell">{{ external_location.name }}</th>
						<td class="govuk-table__cell">{{ external_location.address|linebreaksbr }}<br>{{ external_location.country.name }}</td>
						<td class="govuk-table__cell govuk-table__cell--numeric">
							{% if not draft.status.value or draft.status.key == 'applicant_editing' or data.external_locations|length > 1 %}
								<a class="govuk-link" href="{% url 'applications:remove_external_location' draft_id external_location.id %}">
									Remove
								</a>
							{% endif %}
						</td>
					</tr>
				{% endfor %}
			</tbody>
		</table>
	{% else %}
		<p class="govuk-caption-l">You haven't added any locations to this application.</p>
	{% endif %}

{% endblock %}

{% extends "layouts/base.html" %}

{% load static %}

{% block back_link %}
    <a href="{% url 'applications:task_list' draft_id %}" id="back-link" class="govuk-back-link">Back to application overview</a>
{% endblock %}

{% block body %}
    <h1 class="govuk-heading-xl">
		{% block title %}Select the countries each product is going to (optional){% endblock %}
	</h1>

    <form method="post">
        <div class="lite-buttons-row govuk-!-margin-bottom-7">
            <a id="link-select-all" role="button" draggable="false" href="./?all=True" class="govuk-link govuk-body govuk-link--no-visited-state">Select all</a>
            <a id="link-deselect-all" role="button" draggable="false" href="./?all=False" class="govuk-link govuk-body govuk-link--no-visited-state">Deselect all</a>
        </div>

        {% csrf_token %}

        <table class="govuk-table" id="countries_list">
            <thead class="govuk-table__head">
                <tr class="govuk-table__row">
                    <th class="govuk-table__header" scope="col">{% lcs "goods.GoodsList.Table.CONTROL_LIST_ENTRY" %}</th>
                    <th class="govuk-table__header" scope="col">{% lcs "goods.GoodsList.Table.DESCRIPTION" %}</th>
                    <th class="govuk-table__header" scope="col">{% lcs "goods.GoodsList.Table.COUNTRIES" %}</th>
                </tr>
            </thead>
            {% for good in goods %}

                <tr class="govuk-table__row">
                    <td class="govuk-table__cell">{{ good.control_code|default_na }}</td>
                    <td class="govuk-table__cell">{{ good.description }}</td>
                    <td class="govuk-table__cell">
                        {% for country in countries %}
                            <div class="govuk-checkboxes govuk-checkboxes--small">
                                <div class="govuk-checkboxes__item">
                                    <input class="govuk-checkboxes__input" {% if country in good.countries and select != 'False' or select == 'True' %}checked{% endif %} type="checkbox" name="{{ good.id }}.{{ country.id }}" id="{{ good.id }}.{{ country.id }}" value="{{ country.id }}">
                                    <label class="govuk-label govuk-checkboxes__label" for="{{ good.id }}.{{ country.id }}">{{ country.name }}
                                    </label>
                                </div>
                            </div>
                        {% endfor %}
                    </td>
                </tr>
            {% endfor %}
        </table>

        <button id="button-give-advice" type="submit" value="submit" class="govuk-button" data-module="govuk-button">
            Save
        </button>
    </form>
{% endblock %}

{% block javascript %}
	<script src="{% static 'javascripts/helpers.js' %}"></script>
	<script src="{% static 'javascripts/select-links.js' %}"></script>
{% endblock %}

{% extends "layouts/base.html" %}

{% block back_link %}
    <a href="{% url 'applications:task_list' draft_id %}" id="back-link" class="govuk-back-link">Back to application overview</a>
{% endblock %}

{% block body %}

    <h1 class="govuk-heading-xl">{% block title %}Select the countries each product is going to (optional){% endblock %}</h1>

    <form method="post">
        <div class="lite-buttons-row">
            <a id="link-select-all" href="./?all=True" class="govuk-link govuk-body govuk-link--no-visited-state">
                Select all
            </a>
            <a id="link-deselect-all" href="./?all=False" class="govuk-link govuk-body govuk-link--no-visited-state">
                Deselect all
            </a>
        </div>
        <br><br>

        {% csrf_token %}

            <table class="govuk-table" id="countries_list">
                <thead class="govuk-table__head">
                    <tr class="govuk-table__row">
                        <th class="govuk-table__header" scope="col">Control list classification</th>
                        <th class="govuk-table__header" scope="col">Description</th>
                        <th class="govuk-table__header" scope="col">Countries</th>
                    </tr>
                </thead>
                {% for good in goods %}

                    <tr class="govuk-table__row">
                        <td class="govuk-table__cell">{{ good.control_code|default:'N/A' }}</td>
                        <td class="govuk-table__cell">{{ good.description }}</td>
                        <td class="govuk-table__cell">
                            {% for country in countries %}
                                <div class="govuk-checkboxes govuk-checkboxes--small">
                                    <div class="govuk-checkboxes__item">
                                        <input class="govuk-checkboxes__input" {% if country in good.countries and select != 'False' or select == 'True' %}checked{% endif %} type="checkbox" name="{{ good.id }}.{{ country.id }}" id="{{ good.id }}.{{ country.id }}" value="{{ country.id }}">
                                        <label class="govuk-label govuk-checkboxes__label" for="{{ good.id }}.{{ country.id }}">{{ country.name }}
                                        </label>
                                    </div>
                                </div>
                            {% endfor %}
                        </td>
                    </tr>
                {% endfor %}
            </table>
        <button id="button-give-advice" type="submit" value="submit" class="govuk-button" data-module="govuk-button">
            Save
        </button>

    </form>

{% endblock %}

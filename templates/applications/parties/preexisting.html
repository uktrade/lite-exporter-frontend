{% extends 'layouts/base.html' %}

{% block back_link %}
	<a href="{% url 'applications:end_user' draft_id %}" id="back-link" class="govuk-back-link">Back</a>
{% endblock%}

{% block body %}
	<h1 class="govuk-heading-l">Add a party you've created before</h1>
    {% include "includes/filter.html" with filters=filters %}
        {% if data.results %}
            <table class="govuk-table">
                <thead class="govuk-table__head">
                    <tr class="govuk-table__row">
                        <th scope="col" class="govuk-table__header">Name</th>
                        <th scope="col" class="govuk-table__header">Address</th>
                        <th scope="col" class="govuk-table__header">Country</th>
                        <th scope="col" class="govuk-table__header">Website</th>
                        <th scope="col" class="govuk-table__header"></th>
                    </tr>
                </thead>
                <tbody class="govuk-table__body">
                    {% for party in data.results %}
                        <tr class="govuk-table__row">
                            <td class="govuk-table__cell" name="party-name">
                                {{ party.name }}
                            </td>
                            <td class="govuk-table__cell" name="party-address">
                                {{ party.address }}
                            </td>
                            <td class="govuk-table__cell" name="party-country">
                                {{ party.country.name }}
                            </td>
                            <td class="govuk-table__cell" name="party-website">
                                {{ party.website }}
                            </td>
                            <td class="govuk-table__cell lite-!-text-align-right">
                                <form action="{% url url draft_id %}" method="post">
                                    {% csrf_token %}
                                    <input type="hidden" name="form_pk" value="0">
                                    <input type="hidden" name="name" value="{{ party.name }}">
                                    <input type="hidden" name="website" value="{{ party.website }}">
                                    <input type="hidden" name="address" value="{{ party.address }}">
                                    <input type="hidden" name="country" value="{{ party.country.id }}">
                                    <button type="submit" class="govuk-button--secondary" name="add">
                                        Add to application
                                    </button>
                                </form>
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
            {% include "includes/pagination.html" with data=data %}
        {% else %}
            <h2 class="govuk-heading-m">No existing parties found.</h2>
        {% endif %}
{% endblock %}
